From:https://www.uclibc.org/docs/psABI-x86_6From:

#### 値の戻り値の戻りは、次のように行われます。
アルゴリズム：
1. 分類アルゴリズムを使用してリターンタイプを分類します。
2. 型のクラスがMEMORYの場合、呼び出し元は戻り値用のスペースを提供し、関数の最初の引数であるかのように、このストレージのアドレスを％rdiで渡します。事実上、このアドレスは「隠された」最初の引数になります。このストレージは、この引数以外の名前で呼び出し先に表示されるデータと重複してはなりません。
戻り時に、％raxには、％rdiで呼び出し元から渡されたアドレスが含まれます。
3. クラスがINTEGERの場合、シーケンス％rax、％rdxの次に使用可能なレジスタが使用されます。
4. クラスがSSEの場合、シーケンス％xmm0、％xmm1の次に使用可能なベクトルレジスタが使用されます。
5. クラスがSSEUPの場合、8バイトは、最後に使用されたベクトルレジスタの次に使用可能な8バイトチャンクで返されます。
6. クラスがX87の場合、値は80ビットx87番号として％st0のX87スタックに返されます。
7.クラスがX87UPの場合、値は％st0の前のX87値と一緒に返されます。
8. クラスがCOMPLEX_X87の場合、値の実数部は％st0に返され、虚数部は％st1に返されます。
レジスタ受け渡し規則の例として、図3.5に示す宣言と関数呼び出しについて考えてみます。対応するレジスタ割り当てを図3.6に示します。与えられたスタックフレームオフセットは、関数を呼び出す前のフレームを示しています。

#### 3.2.1レジスタとスタックフレーム
AMD64アーキテクチャは、16個の汎用64ビットレジスタを提供します。さらに、このアーキテクチャは、それぞれ128ビット幅の16個のSSEレジスタと、それぞれ80ビット幅の8個のx87浮動小数点レジスタを提供します。各x87浮動小数点レジスタは、MMX / 3DNow！では 64ビットレジスタとしてのモードとして参照されます。これらのレジスタはすべて
特定のスレッドに対してアクティブなすべてのプロシージャに対してグローバルです。
Intel AVX（Advanced Vector Extensions）は、16個の256ビット幅のAVXレジスタ（％ymm0-％ymm15）を提供します。 ％ymm0〜％ymm15の下位128ビットは、それぞれの128bビットSSEレジスタ（％xmm0〜％xmm15）にエイリアスされます。パラメータの受け渡しと関数の戻りのために、％xmmNと％ymmNは同じレジスタを参照します。
同時に使用できるのはそのうちの1つだけです。 SSEまたはAVXレジスタのいずれかを参照するためにベクトルレジスタを使用します。
このサブセクションでは、各レジスタの使用法について説明します。レジスタ％rbp、％rbx、および％r12から％r15は、呼び出し元の関数に「属し」、呼び出された関数はそれらの値を保持する必要があります。つまり、呼び出された関数は、呼び出し元のためにこれらのレジスタの値を保持する必要があります。残りのレジスタは、呼び出された関数に「属します」。
呼び出し元の関数がそのようなレジスタ値を
関数呼び出しでは、値をローカルスタックフレームに保存する必要があります。
CPUは、関数に入るときにx87モードになっている必要があります。したがって、MMXレジスタを使用するすべての関数は、MMXレジスタを使用した後、別の関数を返すか呼び出す前に、emmsまたはfemms命令を発行する必要があります。
％rFLAGSレジスタの方向フラ​​グDFは、関数の開始時と戻り時にクリア（「順方向」方向に設定）されている必要があります。他のユーザーフラグは、標準の呼び出しシーケンスで特定の役割を持たず、呼び出し間で保持されません。
MXCSRレジスタの制御ビットは呼び出し先で保存されます（呼び出し全体で保持されます）が、ステータスビットは呼び出し元で保存されます（保存されません）。 x87ステータスワードレジスタは呼び出し元で保存されますが、x87制御ワードは呼び出し先で保存されます。